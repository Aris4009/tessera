plugins {
    id 'com.github.johnrengelman.shadow' version '5.2.0'
}

dependencyCheck {
    failBuildOnCVSS = 11
}

dependencies {
    compile project(':config')
    compile project(':key-vault:key-vault-api')
    compile 'org.springframework.vault:spring-vault-core:2.1.5.RELEASE'
    compile 'com.squareup.okhttp3:okhttp:3.12.3'
}

shadowJar {
    classifier = 'all'
    mergeServiceFiles()
    manifest {
        inheritFrom project.tasks.jar.manifest
    }
}

jar {
    manifest {
        attributes 'Tessera-Version': version,
                "Implementation-Version": version,
                'Specification-Version' : String.valueOf(version).replaceAll("-SNAPSHOT",""),
                'Main-Class' : 'com.quorum.tessera.data.migration.Main'

    }
}

build.dependsOn shadowJar
